
@{
    Layout = "~/Views/Shared/StudentSideBar.cshtml";
}

@using YazGelProje.Models;
@{var i = 1;}
@{MyContext context = new MyContext();
    string number = User.Identity.Name;
    int studentId = context.Students.Where(x => x.StudentNumber == number).Select(x => x.StudentId).FirstOrDefault();
    var studentNumber = context.Interns.Where(x => x.StudentId == studentId).Select(x => x.Student.StudentNumber).FirstOrDefault();
    var studentName = context.Interns.Where(x => x.StudentId == studentId).Select(x => x.Student.Name).FirstOrDefault();
    var studentClass = context.Interns.Where(x => x.StudentId == studentId).Select(x => x.Student.Class).FirstOrDefault();

    var studentSurname = context.Interns.Where(x => x.StudentId == studentId).Select(x => x.Student.Surname).FirstOrDefault();
    var internStart = context.InternStudentStarts.Where(x => x.StudentId == studentId).Select(x => x.InternStart).FirstOrDefault();
    var internEnd = context.InternStudentStarts.Where(x => x.StudentId == studentId).Select(x => x.InternEnd).FirstOrDefault();
    var workTime = context.InternStudentStarts.Where(x => x.StudentId == studentId).Select(x => x.WorkTime).FirstOrDefault();

}

<head>
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/style.css" rel="stylesheet" type="text/css">
    <link href="~/Content/styles/lunar.css" rel="stylesheet" type="text/css" id="colorstyle">
    <link href="~/Content/demo/demo.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="~/Content/jquery-3.1.1.min.js"></script>
    @*<script src="~/Content/demo/demo.js"></script>*@
    @*<script src="~/Content/demo/SmoothScroll.min.js"></script>*@
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <script src="~/ckeditor/ckeditor.js"></script>
</head>


@if (ViewBag.data != 0)
{
    <div style="border: 2px solid; width: 1015px; font-size: 20px; height: 37.7cm; background-repeat: no-repeat; background-size: 100% 100%; margin-left:10px ">
        <h1 style="margin-top:-352px;margin-left:500px;font-weight:bold;font-style:italic;color:black">@studentName @studentSurname</h1>
        <h1 style="margin-top:-7px;margin-left:570px;font-weight:bold;font-style:italic;color:black">@studentClass</h1>
        <h1 style="margin-top:-13px;margin-left:500px;font-weight:bold;font-style:italic;color:black">@studentNumber</h1>

    </div>



    <div style="margin-top:1200px">
        <br />
        <br />
        <div style="border: 2px solid; width: 940px; font-size: 18px; height: 35.3cm; font-family: Arial; margin-left: 45px ">
            <div style="margin-left:80px;margin-top:180px">
                <p style="font-weight:bold">ÖĞRENCİNİN</p>
                <div style="margin-left:70px">
                    <p style="font-weight:bold">Adı Soyadı :</p>
                    <p style="margin-top:35px">Buraya öğrencinin fotoğrafı yapıştırılacak ve damgalanacaktır.</p>
                </div>
            </div>
            <p style="margin-top:-98px;font-weight:bold">Sınıfı :</p>
            <p style="font-weight:bold">Numarası :</p>
            <p style="font-weight:bold">İmzası :</p>
            <p style="font-weight:bold">Raporu Teslim Tarihi :</p>
        </div>

        <br /><br /><br />
        <p style="font-weight:bold">STAJIN KODU :</p><br /><br /><br />
        <p style="font-weight:bold">STAJ YAPILAN KURULUŞUN </p>

        <div style="margin-left:70px">
            <p style="font-weight:bold">Adı Ve Adresi :</p>
            <p style="font-weight:bold">Stajın Başlangıç Tarihi :</p>
            <p style="font-weight:bold">Bitiş Tarihi :</p>
        </div>

        <br /><br /><br />
        <p style="font-weight:bold">STAJYERDEN SORUMLU İŞYERİ YETKİLİSİNİN </p>
        <div style="margin-left:70px">
            <p style="font-weight:bold">Adı Soyadı :</p>
            <p style="font-weight:bold">Unvanı :</p>
            <p style="font-weight:bold">İmzası :</p>
            <p style="font-weight:bold">İş yerinin Mühürü :</p>
        </div>

        <br /><br /><br />
        <p style="font-weight:bold">RAPORU İNCELEYEN ÖĞETİM ELEMANININ  </p>
        <div style="margin-left:70px">
            <p style="font-weight:bold">Adı Soyadı :</p>
            <p style="font-weight:bold">Staj Çalışmasına Verdiği Not :</p>
            <p style="font-weight:bold">İmzası :</p>
            <p style="font-weight:bold">Tarih :</p>
        </div>

    </div>

    <div style="margin-top:1200px">
        <br /><br />
        <div style="border: 2px solid; width: 940px; height: 35.3cm; font-family: Arial; font-size: 18px; margin-left: 45px ">

            <p style="margin-top:300px;margin-left:50px">
                Öğrencinin aşağıda belirtilen kurumda staj yapması uygun görülmüştür. <br />
                Staj Yeri:
            </p>

            <p style="margin-top: 250px; margin-left: 50px">
                Staj Komisyonu Üyesinin <br />
                Adı ve Soyadı : <br />
                İmzası :
            </p>
        </div>
    </div>

    <div style="margin-top:1200px">
        <br /><br />
        <div style="font-family: Arial; font-size: 18px; margin-left: 45px">

            <div style="border: 0.5px solid; padding-left: 10px; width: 940px">
                @if (User.Identity.IsAuthenticated)
                {
                    <p style="font-weight:bold;font-style:italic">ÖĞRENCİNİN</p>
                    <p style="font-weight:bold;font-style:italic">Adı-Soyadı : <a style=" color: black;font-weight:bold;font-style:italic">@studentName @studentSurname</a></p>
                    <p style="font-weight:bold;font-style:italic">Numarası : <a style="color: black;font-weight:bold;font-style:italic">@studentNumber </a></p>
                }
            </div>
            <table class="table table-bordered" style="width: 940px">
                <thead>
                    <tr style="font-family: Arial; font-weight: bold; font-style: italic; font-size: 18px;width:855px ">
                        <th scope="col" style="text-align:center">Gün No</th>
                        <th scope="col" style="text-align:center">Tarih</th>
                        <th scope="col" style="text-align:center">Yapılan Çalışma</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr style="text-align:center;font-size:18px">
                            <td style="">@i</td>
                            <td style="">@item.InternDate.Value.Date.ToString().TrimEnd('0', ':')</td>
                            <td style="">@item.Title</td>
                        </tr>
                        i++;
                    }

                </tbody>
            </table>
        </div>
    </div>
    <p style="margin-left: 30px; font-family: Arial">Yukarıda kimliği yazılı öğrenci <a style="font-weight:bold;font-style:italic;color:black">@internStart.Value.Date.ToString().TrimEnd('0', ':')</a> tarihinden <a style="font-weight: bold; font-style: italic; color: black">@internEnd.Value.Date.ToString().TrimEnd('0', ':')</a> tarihine kadar toplam <a style="font-weight: bold; font-style: italic; color: black ">@workTime</a> iş günü kuruluşumuzda staj yapmıştır.</p>

    <br />
    <p style="margin-left: 620px; font-weight: bold; font-family: Arial">Değerlendirmeyi Yapan Sorumlu Mühendis</p>
    <br />
    <p style="margin-left: 770px; font-family: Arial">(Ad Soyad, Mühür ve İmza)</p>

    <br />

    foreach (var item in Model)
    {
        <div style="margin-top:1200px">
            <br /><br />
            <div style="border: 2px solid; width: 940px; font-size: 20px; height: 36cm; margin-left: 45px ">

                <div style="border: 1px solid; width: 910px; height: 80px; margin-left: 13px; margin-top: 10px">

                    <h3 style="margin-left: 5px; color: black;">Yapılan İş : <a style="font-weight:bold;font-style:italic;color:black">@item.Title</a> <a style="color: black; font-weight: bold; font-style: italic;float:right ;margin-right:6px">@item.InternDate.Value.Date.ToString().TrimEnd('0', ':') </a> <a style="color:black;float:right">Tarih:</a>  </h3>

                </div>

                <div style="margin-left:17px;margin-right:17px">
                    <p>@Html.Raw(item.Description)</p>
                </div>


                <div style="border: 1px solid; width: 910px; margin-left: 13px;margin-top:10px">
                    <div style="margin-top:7px">
                        <a style="color:black;margin-left:111px;margin-top:5px;font-weight:bold">Öğrencinin İmzası</a>

                        <div style="border-left: 1px solid; margin-left:370px;margin-top:-35px">
                            <a style="color:black;margin-left:183px;font-weight:bold">Staj Amirinin</a><br />
                            <a style="color:black;margin-left:19px;margin-top:10px">Adı-Soyadı : </a><br /><br />
                            <a style="color:black;margin-left:19px">İmzası : </a>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    }
    <br />
    <br />
    <br />
}
else
{
    <h1 style="font-weight:bold;font-style:italic;text-align:center;background-color:red;color:white">Sisteme kayıtlı staj defteriniz bulunmamaktadır.</h1>
}

